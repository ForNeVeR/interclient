<!DOCTYPE HTML PUBLIC "-//W3O/DTD HTML//EN">

<html>
<head>
<title>Crema - Quickstart</title>
<meta name="GENERATOR" content="Microsoft FrontPage 1.1">
<meta name="FORMATTER" content="Microsoft FrontPage 1.1">
</head>
<body bgcolor="#1B0C02" text="#C28F60" link="#FF8000"
vlink="#FF8000">
<p><font face="Comic Sans MS,Arial,Helvetica"><font size="5"><strong>Quickstart</strong></font></p>
<hr noshade color="#BE8F60">
<h3>Introducing Crema&#153;</h3>
<p>Crema is the Java obfuscator - the program that makes your
compiled Java software less vulnerable to decompilation and
reverse engineering. To that end, Crema removes all non-essential
symbolic information from your .class files, and optionally
replaces it with fake symbolic information designed to confuse
decompilers.</p>
<p>Crema also includes two features that are specifically
targeted at the Mocha&#153; decompiler: it can include a small
&quot;bomb&quot; in your .class files that will make Mocha crash
but is harmless in any other respect. Or it can include a
customizable message that will be printed by Mocha. Such a
message could inform a user of the license violation s/he is
about to commit.</p>
<h3>Using Crema</h3>
<p>Before you can use Crema, you should <a
href="installation.html">install</a> it and verify that you can <a
href="running.html">run</a> it.</p>
<h3>Step 1 - Selecting the .class files</h3>
<p>Determine which .class files you want to obfuscate. In
general, obfuscate all the classes that make up your project
(applet, application, package, etc.). With Crema, you obfuscate
them all together.</p>
<p>If your project uses library packages (other than the standard
packages) you can include them in the obfuscation, or leave them
as they are. Unless the license agreement for the library
contains explicit instructions, the choice is up to you.</p>
<h3>Step 2 - Running Crema</h3>
<p>Now run Crema, specifying the -v parameter and the names of
the .class files selected in the previous step (you can use * and
? wildcards). For instance:</p>
<blockquote>
    <p><font size="4"><tt>java Crema -v *.class</tt></font></p>
</blockquote>
<p>Crema will print something similar to the following</p>
<blockquote>
    <pre><font size="4">CREMA - The Java Obfuscator - Version 1.0
Copyright (c) 1996  Hanpeter van Vliet

Loading Node.class
Loading Edge.class
Loading GraphPanel.class
Loading Graph.class

Obfuscating Node
Obfuscating Edge
Obfuscating GraphPanel
Obfuscating Graph

Saving Node as $1.crema
Saving Edge as $2.crema
Saving GraphPanel as $3.crema
Saving Graph as Graph.crema</font></pre>
</blockquote>
<p>The .crema files are the obfuscated version of your project.
Move to your web site, rename to .class, and presto! (Crema can
also produce .class files directly; see <a href="output.html">output
parameters</a> for more information).</p>
<h3>Step 3 (optional) - Excluding class and member names</h3>
<p>There are three kinds of symbolic names in your project that
should not be obfuscated, or your project will stop working. Two
categories (public items and method overrides) are recognized
automatically be Crema and do not require user intervention. The
third category, classes referenced by name, is recognized by
Crema but not handled automatically:</p>
<p>If your project uses <font size="4"><tt>Class.forName()</tt></font>,
the classes that may be referenced by that statement should not
be renamed, or the call will fail. Similarly, if you use <font
size="4"><tt>Class.getName()</tt></font> you will get different
answers for classes that have been obfuscated. Crema will
automatically detect and report the use of these methods with a
message similar to the following:</p>
<blockquote>
    <pre><font size="4"><tt>Obfuscating SortItem
  Method void run() calls Class.forName()
  Be sure to exclude (with -xc) the classes that may be referenced here!</tt></font></pre>
</blockquote>
<p>You must manually determine which classes can be referenced
here, and exclude them with the <font size="4"><tt>-xc</tt></font>
parameter when you re-run Crema. In practice you will want to
create a <a href="paramfiles.html">parameter file</a> for this
purpose.</p>
<h3>Step 4 (optional) - Verifying and tuning the obfuscation</h3>
<p>If you want to see how effective Crema is on your .class
files, just feed them to Mocha and see what happens. Most likely,
Mocha will crash immediately with a NullPointerException. Crema
exploits a bug in Mocha to make that happen. Cute, but it may not
be effective against other decompilers.</p>
<p>To see what the result would be if Mocha did not crash, rerun
Crema with the <font size="4"><tt>-nobomb</tt></font> switch.
(This switch is not recommended in general, just to satisfy your
curiosity). Then run Mocha on the result.</p>
<p>You can play with the <a href="obfuscation.html">obfuscation
parameters</a> to tune the effectiveness of Crema. Once you have
established the optimum set of parameters for your purpose, you
will want to record them in a <a href="paramfiles.html">parameter
file</a> for later use.</p>
<hr noshade color="#BE8F60">
<table width="100%">
    <tr>
        <td valign="top"><a href="index.html"><font size="5"><strong>&lt;&lt;</strong></font></a></td>
        <td align="center"><font size="2">Copyright &#169; 1996
        Hanpeter van Vliet</font></td>
        <td align="right" valign="top"><a
        href="installation.html"><font size="5"><strong>&gt;&gt;</strong></font></a></td>
    </tr>
</table>
</body>
</html>
